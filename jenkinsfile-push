node {
     stage('Clone repository') {
         checkout scm
     }
         stage('Deploy Pod') {
            steps {
                script {
                    // Kubernetes Pod 생성 + 고유 IP를 할당
                   sh "kubectl apply -f echo-pod.yml"
                    
                    // 생성된 Pod 확인
                    sh "kubectl get pod"
                    // 컨테이너에 접속
                    sh "kubectl exec -it echo -- sh'"

                }
            }
        }
     stage('Build image') {
        // Docker 이미지 빌드
         app = docker.build("eunseonjeong/clive-trans")
     }
     stage('Push image') {
                script {
                    // Docker 이미지 푸시
                    sh 'docker compose up -d'
                }
     }
   
}